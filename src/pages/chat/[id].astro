---
// Importa supabase y Layout
import Layout from '../../layouts/Layout.astro';
import ChatInterface from '../../components/ChatInterface.astro';
const { id } = Astro.params;

// Obtiene la informaci贸n de la sesi贸n y las conversaciones desde la API
let session = null;
let conversations = [];

try {
  const response = await fetch(`/api/chat?id=${id}`, {
    method: 'GET',
    credentials: 'include', // Incluye las cookies
  });
  
  const result = await response.json();

  if (result.success && result.data) {
    session = result.data.session;
    conversations = result.data.conversations;
  } else {
    console.error('Error: ', result.error);
  }
} catch (err) {
  console.error('Error fetching session and conversations:', err);
}
---

<Layout title="Detalles de la sesi贸n">
  <h1>Detalles de la sesi贸n</h1>

  <ChatInterface sessionId={id} />
</Layout>
